{% extends 'base.html' %}
{% block content %}
<h3 class="mb-3">{{ 'Add Tenant' if not tenant else 'Edit Tenant' }}</h3>
<form method="post" class="row g-3 card p-3">
  <div class="col-md-3">
    <label class="label">Tenant Code / ID</label>
    <input name="tenant_code" class="form-control" placeholder="T001" value="{{ tenant.tenant_code if tenant else '' }}">
  </div>
  <div class="col-md-3">
    <label class="label">Full Name</label>
    <input name="name" class="form-control" placeholder="Tenant full name" value="{{ tenant.name if tenant else '' }}" required>
  </div>
  <div class="col-md-2">
    <label class="label">Flat / Unit</label>
    <input name="flat" class="form-control" placeholder="A-101" value="{{ tenant.flat if tenant else '' }}" required>
  </div>
  <div class="col-md-2">
    <label class="label">Monthly Rent (â‚¹)</label>
    <input name="rent_amount" type="number" step="0.01" class="form-control" placeholder="12000" value="{{ tenant.rent_amount if tenant else '' }}">
  </div>

  {% if not tenant %}
  <div class="col-md-3">
    <label class="label">Login Email</label>
    <input name="email" type="email" class="form-control" placeholder="tenant@example.com" required>
  </div>
  <div class="col-md-3">
    <label class="label">Initial Password</label>
    <input name="password" type="password" class="form-control" placeholder="Set a password" required>
  </div>
  {% endif %}

  {% if is_super %}
  <div class="col-md-4">
    <label class="label">Owner (Admin)</label>
    <select name="owner_user_id" class="form-select">
      {% for o in owners %}
        <option value="{{o.id}}" {% if tenant and tenant.owner_user_id==o.id %}selected{% endif %}>{{ o.email }}</option>
      {% endfor %}
    </select>
  </div>
  {% endif %}

  {% if tenant %}
  <div class="col-md-2 d-flex align-items-center">
    <div class="form-check mt-4">
      <input class="form-check-input" type="checkbox" name="active" {% if tenant.active %}checked{% endif %}>
      <label class="form-check-label">Active</label>
    </div>
  </div>
  {% endif %}

  <div class="col-12 mt-2">
    <button class="btn btn-primary">Save</button>
    <a class="btn btn-outline-secondary" href="{{ url_for('admin_tenants') }}">Cancel</a>
  </div>
</form>
{% endblock %}
